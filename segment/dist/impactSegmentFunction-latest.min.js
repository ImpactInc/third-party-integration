/*!
 * WARNING!!!
 * This is an autogenerated file, please update correct files and then run `npm i` to regenerate when needed.
 * (version: 1.8.0; hash: 390ed369; uncommitted files: 0eb84763 [segment/js/bin/release])
 */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=5)}([function(e,t,r){"use strict";t.DEVICE_NAME={IOS:"iOS App",ANDROID:"Android App"};t.DEVICE_TYPE={IOS:"ios",ANDROID:"android"};t.ENDPOINT={PAGE_LOAD:"https://trkapi.impact.com/PageLoad",CONVERSION_PREFIX:"https://api.impact.com/Advertisers",APPLICATION_INSTALL:"https://trkapi.impact.com/AppInstall",CONVERSION_SUFFIX:"/Conversions.json"};t.DEFAULT_ORDER_ID="IR_AN_64_TS";t.REFERRER_TYPE="impactradius";const n={APPLICATION_INSTALLED:"Application Installed",INSTALL:"INSTALL",ORDER_COMPLETE:"Order Complete",ORDER_COMPLETED:"Order Completed",PAGE_LOAD:"Page Load",SCREEN_LOAD:"Screen Load"};t.EVENT_TYPE=n;const o={APPLICATION_INSTALLED:[n.APPLICATION_INSTALLED],ORDER_COMPLETE:[n.ORDER_COMPLETE,n.ORDER_COMPLETED],PAGE_LOAD:[n.PAGE_LOAD],SCREEN_LOAD:[n.SCREEN_LOAD]};t.DEFAULT_EVENT_TYPES=o;t.ENABLED_FLAG={PAGE_LOAD:"enablePageEvents",SCREEN_LOAD:"enableScreenEvents",IDENTIFY:"enableIdentifyEvents"};t.INTEGRATION_SOURCE="SegmentCustom";t.INTEGRATION_VERSION="1.8.0"},function(e,t,r){"use strict";e.exports=(...e)=>e.reduce((e,t)=>(Object.keys(t).filter(e=>void 0!==t[e]).forEach(r=>e[r]=t[r]),e),{})},function(e,t,r){"use strict";e.exports=e=>Object.keys(e).filter(t=>null!==e[t]&&void 0!==e[t]).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")},function(e,t,r){"use strict";const{DEVICE_TYPE:n,REFERRER_TYPE:o,INTEGRATION_SOURCE:i,INTEGRATION_VERSION:c}=r(0),s=r(9),a=r(1),u=r(12),p=(e,t)=>{const r={};if("object"!=typeof t.customParameterMapping)return r;for(const n in t.customParameterMapping){if(!t.customParameterMapping.hasOwnProperty(n)||!t.customParameterMapping[n])continue;const o=l(t.customParameterMapping[n],e);null!=o&&""!==o&&(r[n]=l(t.customParameterMapping[n],e))}return r};function l(e,t){const r=e.split(".");let n=t;for(let e=0,t=r.length;e<t;++e){if("object"!=typeof n)return null;n=n[r[e]]}return n}e.exports=(e,t)=>{return(r=a(((e,t)=>({CampaignId:t.campaignId,PageUrl:e.context.page.url||e.properties.url||e.context.page.referrer||e.context.referrer.url,ReferringUrl:e.context.referrer.url||e.context.page.referrer,EventDate:e.timestamp,ClickId:e.context.referrer.id&&String(e.context.referrer.type).toLowerCase()===o?e.context.referrer.id:void 0,CustomProfileId:e.anonymousId,CustomerId:e.userId,CustomerEmail:e.context.traits.email||e.properties.email,IpAddress:e.context.ip,AppName:e.context.app.name,AppPackage:e.context.app.namespace,AppVer:e.context.app.version,DeviceMfr:e.context.device.manufacturer,DeviceModel:e.context.device.model,DeviceCarrier:e.context.network.carrier,DeviceOs:e.context.device.type||e.context.os.name,DeviceOsVer:e.context.os.version,DeviceLocale:e.context.locale,UserAgent:e.context.userAgent,Latitude:e.context.location.latitude,Longitude:e.context.location.longitude,IntegrationSource:i,IntegrationVersion:c}))(e,t),((e,t)=>{switch(String(e.context.device.type).toLowerCase()){case n.IOS.toLowerCase():return{PropertyId:t.iOsAppId,AppleIfa:e.context.device.advertisingId,AppleAdTrack:e.context.device.adTrackingEnabled,AppleIfv:e.context.device.id};case n.ANDROID.toLowerCase():return{PropertyId:t.androidAppId,GoogAId:e.context.device.advertisingId,AppleAdTrack:e.context.device.adTrackingEnabled};default:return{}}})(e,t),p(e,t))).CustomerEmail&&(r.CustomerEmail=s(r.CustomerEmail)),r;var r},e.exports.customParameterMapper=(e,t,r)=>a(e,u(t),p(t,r))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var a,u=[],p=!1,l=-1;function d(){p&&a&&(p=!1,a.length?u=a.concat(u):l=-1,u.length&&E())}function E(){if(!p){var e=s(d);p=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function I(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||p||s(E)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=I,o.addListener=I,o.once=I,o.off=I,o.removeListener=I,o.removeAllListeners=I,o.emit=I,o.prependListener=I,o.prependOnceListener=I,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";const{EVENT_TYPE:n,ENABLED_FLAG:o}=r(0),i=r(6),c=r(7)(i),s=r(3),a=r(17);var u;function p(e,t){return(r,n)=>{if(t&&!n[t])throw new Error(e+" is not enabled for this event");const o=a(r),i=s(o,n);return c(o,n,i,e||null)}}onTrack=p(),onPage=p(n.PAGE_LOAD,o.PAGE_LOAD),onScreen=p(n.SCREEN_LOAD,o.SCREEN_LOAD),onIdentify=p(n.PAGE_LOAD,o.IDENTIFY),onGroup=(u="onGroup",(e,t)=>{throw new Error(u+" is not implemented")})},function(e,t,r){"use strict";e.exports=async(e,t,r)=>{const n=await t;console.info("POSTING:",e,n);const o=await fetch(e,{method:"POST",headers:r,body:n}),i=await o.json();return console.info("RESPONSE:",i),i}},function(e,t,r){"use strict";const{EVENT_TYPE:n,ENDPOINT:o}=r(0),i=r(2),c=r(8),s=r(1),{customParameterMapper:a}=r(3),u=r(13),p=r(15);e.exports=e=>{const t={[n.ORDER_COMPLETE]:u,[n.APPLICATION_INSTALLED]:p(e)};return(r,u,p,l)=>{const d=l||c(r.event,u);switch(d){case n.APPLICATION_INSTALLED:case n.ORDER_COMPLETE:e(o.CONVERSION_PREFIX+"/"+u.accountSid+o.CONVERSION_SUFFIX,new Promise(e=>t[d](r,u,p).then(t=>{e(i(s(p,a(t,r,u))))})),new Headers({Authorization:"Basic "+btoa(u.accountSid+":"+u.apiKey),"Content-Type":"application/x-www-form-urlencoded"}));break;case n.PAGE_LOAD:case n.SCREEN_LOAD:e(o.PAGE_LOAD,new Promise(e=>e(JSON.stringify(p))),new Headers({"Content-Type":"application/json"}));break;case null:throw new Error("Undefined/Unmatched Event Type");default:throw new Error("Unsupported Event Type: "+d)}}}},function(e,t,r){"use strict";const{EVENT_TYPE:n,DEFAULT_EVENT_TYPES:o}=r(0),i=(e,t,r)=>{e=String(e).toLowerCase(),t=t||[],Array.isArray(t)||(t=[t]);const n=(t=t.concat(r||[])).map(e=>String(e).toLowerCase()).indexOf(e);return n>-1?t[n]:null};e.exports=(e,t)=>i(e,t.installEventNames,o.APPLICATION_INSTALLED)?n.APPLICATION_INSTALLED:i(e,t.actionEventNames,o.ORDER_COMPLETE)?n.ORDER_COMPLETE:i(e,t.pageLoadEventNames,o.PAGE_LOAD)?n.PAGE_LOAD:i(e,t.screenLoadEventNames,o.SCREEN_LOAD)?n.SCREEN_LOAD:null},function(e,t,r){"use strict";const n=r(10);e.exports=e=>{if(null!=e)return n.createHash("sha1").update(e.trim().toLowerCase()).digest("hex")}},function(e,t,r){"use strict";e.exports="undefined"!=typeof crypto?crypto:r(11)||{createHash:()=>({update:e=>({digest:()=>e})})}},function(e,t){e.exports=crypto},function(e,t,r){"use strict";const{DEFAULT_ORDER_ID:n}=r(0),o=e=>Array.isArray(e)?e.length?e:null:e||null;e.exports=e=>({OrderId:o(e.properties.orderId)||o(e.properties.order_id)||o(e.properties.transactionID)||o(e.properties.messageId)||o(e.messageId)||n})},function(e,t,r){"use strict";(function(t){const n=r(14);e.exports=(e,r)=>new Promise(o=>{t.nextTick(()=>{const t=n(e,r.customMappingForProducts||{});t.CustomerStatus=e.context.traits.status,t.EventTypeCode=e.event?String(e.event).replace(",",""):null,t.EventTypeId=r.eventTypeId?parseInt(r.eventTypeId,10):null,o(t)})})}).call(this,r(4))},function(e,t,r){"use strict";const n={brand:"ItemBrand",category:"ItemCategory",coupon:"ItemPromoCode",name:"ItemName",price:"ItemPrice",quantity:"ItemQuantity",sku:"ItemSku"},o={coupon:"OrderPromoCode",currency:"CurrencyCode",discount:"OrderDiscount",shipping:"OrderShipping",tax:"OrderTax"};e.exports=(e,t)=>{const r={},i=(e||{}).properties||{};if(!Object.keys(i).length)return r;for(const e in i)i.hasOwnProperty(e)&&o[e]&&"total"!==e&&(r[o[e]]=i[e]);const c={};let s="price";for(const e in n)n.hasOwnProperty(e)&&(t[n[e]]?("ItemPrice"===n[e]&&(s=t[n[e]]),c[t[n[e]]]=n[e]):c[e]=n[e]);for(const e in t)"ItemPrice"===e&&(s=t[e]),c[t[e]]=e;const a=i.products||[];for(let e=0,t=a.length;e<t;++e){const t=a[e];for(const n in t)t.hasOwnProperty(n)&&c[n]&&(r[`${c[n]}${e}`]=t[n]);!r[s]&&t.subtotal&&(r["ItemPrice"+e]=t.subtotal)}if(!r.ItemPrice0){const e=i.revenue||i.total||null;e&&(r.OrderSubTotalPostDiscount=e)}return r}},function(e,t,r){"use strict";const{DEVICE_TYPE:n,EVENT_TYPE:o}=r(0),i=r(16),c=r(1);e.exports=e=>{const t=i(e);return(e,r,i)=>new Promise(s=>{t(i).then(t=>s(c(t,{EventTypeId:e.context.device.type===n.IOS?r.iOsAppId:r.androidAppId,EventCode:o.INSTALL})))})}},function(e,t,r){"use strict";(function(t){const{ENDPOINT:n}=r(0),o=r(2),i=r(1),c=e=>{const t=(e||"").split("?");if(!t[1])return;const r=t[1].split("&");for(let e=0,t=r.length;e<t;++e){const[t,n]=r[e].split("=");if("irclickid"===t)try{return decodeURIComponent(n)}catch(e){return n}}};e.exports=e=>async r=>{const s=await e(n.APPLICATION_INSTALL,new Promise(e=>t.nextTick(()=>e(o(r)))),new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}))||{};return s.clickId?new Promise(e=>e(i(r,{ClickId:s.clickId}))):new Promise(e=>e(i(r,{ClickId:c(s.landingPage)})))}}).call(this,r(4))},function(e,t,r){"use strict";e.exports=e=>_.defaultsDeep({},e,{context:{app:{},device:{},location:{},network:{},os:{},page:{},properties:{},referrer:{},traits:{}},properties:{}})}]);